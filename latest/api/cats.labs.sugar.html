<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><title>cats.labs.sugar documentation</title></head><body><header><section class="title"><h1><a href="index.html">Cats Api Documentation</a></h1></section><small>Version: 1.2.0</small></header><section class="container"><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cats</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>applicative</span></div></div></li><li class="depth-3"><a href="cats.applicative.validation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validation</span></div></a></li><li class="depth-2 branch"><a href="cats.builtin.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>builtin</span></div></a></li><li class="depth-2 branch"><a href="cats.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-2 branch"><a href="cats.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="cats.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>labs</span></div></div></li><li class="depth-3 branch"><a href="cats.labs.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="cats.labs.continuation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>continuation</span></div></a></li><li class="depth-3"><a href="cats.labs.crdt.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crdt</span></div></a></li><li class="depth-4 branch"><a href="cats.labs.crdt.gcounter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gcounter</span></div></a></li><li class="depth-4 branch"><a href="cats.labs.crdt.gset.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gset</span></div></a></li><li class="depth-4 branch"><a href="cats.labs.crdt.pncounter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pncounter</span></div></a></li><li class="depth-4 branch"><a href="cats.labs.crdt.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-4"><a href="cats.labs.crdt.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-3 branch"><a href="cats.labs.lens.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>lens</span></div></a></li><li class="depth-3 branch"><a href="cats.labs.manifold.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>manifold</span></div></a></li><li class="depth-3 branch"><a href="cats.labs.reader.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reader</span></div></a></li><li class="depth-3 branch"><a href="cats.labs.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3 branch current"><a href="cats.labs.sugar.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sugar</span></div></a></li><li class="depth-3 branch"><a href="cats.labs.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="cats.labs.writer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>writer</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -486px;"><span class="top" style="height: 495px;"></span><span class="bottom"></span></span><span>monad</span></div></div></li><li class="depth-3 branch"><a href="cats.monad.either.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>either</span></div></a></li><li class="depth-3 branch"><a href="cats.monad.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3 branch"><a href="cats.monad.identity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>identity</span></div></a></li><li class="depth-3"><a href="cats.monad.maybe.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>maybe</span></div></a></li><li class="depth-2 branch"><a href="cats.protocols.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2"><a href="cats.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><section class="namespace-docs" id="content"><h2 class="anchor" id="top">cats.labs.sugar</h2><div class="doc"><div class="markdown"><p>Experimental syntax sugar for core abstractions. Sugar that proves its worthiness will graduate to the cats.core namespace.</p></div></div><div class="public anchor" id="var--.3E.3D"><h3><a href="#var--.3E.3D">-&gt;=</a></h3><h4 class="type">macro</h4><div class="usage"><code>(-&gt;= expr &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Like <code>-&gt;</code>, but with monadic binding instead of pure application. A mnemonic for the name is a pun on <code>&gt;&gt;=</code>, the monadic bind operator, and clojure&rsquo;s regular arrow macros.</p><p>You can think of it as generalizing the <code>some-&gt;</code> thread macro to all Monads instead of just Maybe.</p><p>Alternatively, if you think of the regular thread macro as sugar for <code>let</code>:</p><p>(-&gt; :a b (c (other args)) d) =&gt; (let [res (b :a)  res (c res (other args))  res (d res)]  res)</p><p>Then <code>-&gt;=</code> is sugar for cats.core/mlet:</p><p>(-&gt;= m-a b (c (other args)) d) (mlet [res m-a  res (c res (other args))  res (d res)]  (return res))</p><p>Note that extra args in this context are assumed pure, and will be evaluated along with the function itself; this also matches the behavior of <code>some-&gt;</code> wrt extra args.</p><p>Threading through pure functions is somewhat awkward, but can be done:</p><p>(-&gt;= m-a  monadic-fn  (-&gt; pure-fn  other-pure-fn  m/return)  other-monadic-fn)</p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L116">view source</a></div></div><div class="public anchor" id="var--.3E.3E.3D"><h3><a href="#var--.3E.3E.3D">-&gt;&gt;=</a></h3><h4 class="type">macro</h4><div class="usage"><code>(-&gt;&gt;= expr &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Like -&gt;&gt;, but with monadic binding instead of pure application. See <code>cats.labs.sugar/-&gt;=</code> for more in-depth discussion.</p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L161">view source</a></div></div><div class="public anchor" id="var-ap"><h3><a href="#var-ap">ap</a></h3><h4 class="type">macro</h4><div class="usage"><code>(ap f &amp; args)</code></div><div class="doc"><div class="markdown"><p>Apply a pure function to applicative arguments, e.g.</p><p>(ap + (just 1) (just 2) (just 3)) ;; =&gt; #&lt;Just [6]&gt; (ap str [&ldquo;hi&rdquo; &ldquo;lo&rdquo;] [&ldquo;bye&rdquo; &ldquo;woah&rdquo; &ldquo;hey&rdquo;]) ;; =&gt; [&ldquo;hibye&rdquo; &ldquo;hiwoah&rdquo; &ldquo;hihey&rdquo;  &ldquo;lobye&rdquo; &ldquo;lowoah&rdquo; &ldquo;lohey&rdquo;]</p><p><code>ap</code> is essentially sugar for <code>(apply fapply (pure f) args)</code>, but for the common case where you have a pure, uncurried, possibly variadic function.</p><p><code>ap</code> actually desugars in <code>alet</code> form:</p><p>(macroexpand-1 `(ap + (just 1) (just2))) ;; =&gt; (alet [a1 (just 1) a2 (just 2)] (+ a1 a2))</p><p>That way, variadic functions Just Work, without needing to specify an arity separately.</p><p>If you&rsquo;re familiar with Haskell, this is closest to writing &ldquo;in Applicative style&rdquo;: you can straightforwardly convert pure function application to effectful application by with some light syntax (&lt;$&gt; and &lt;*&gt; in case of Haskell, and <code>ap</code> here).</p><p>See the original Applicative paper for more inspiration: <a href="http://staff.city.ac.uk/~ross/papers/Applicative.pdf">http://staff.city.ac.uk/~ross/papers/Applicative.pdf</a></p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L35">view source</a></div></div><div class="public anchor" id="var-ap-.3E"><h3><a href="#var-ap-.3E">ap-&gt;</a></h3><h4 class="type">macro</h4><div class="usage"><code>(ap-&gt; x &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Thread like <code>-&gt;</code>, within an applicative idiom.</p><p>Compare:</p><p>(macroexpand-1 `(-&gt; a b c (d e f))) =&gt; (d (c (b a) e f)</p><p>with:</p><p>(macroexpand-1 `(ap-&gt; a b c (d e f)) =&gt; (ap d (ap c (ap b a) e f))</p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L68">view source</a></div></div><div class="public anchor" id="var-ap-.3E.3E"><h3><a href="#var-ap-.3E.3E">ap-&gt;&gt;</a></h3><h4 class="type">macro</h4><div class="usage"><code>(ap-&gt;&gt; x &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Thread like <code>-&gt;&gt;</code>, within an applicative idiom. See <code>cats.labs.sugar/ap-&gt;</code> for more in-depth discussion.</p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L91">view source</a></div></div><div class="public anchor" id="var-as-.3E.3D"><h3><a href="#var-as-.3E.3D">as-&gt;=</a></h3><h4 class="type">macro</h4><div class="usage"><code>(as-&gt;= expr name &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Like <code>as-&gt;</code>, but with monadic binding instead of pure application. See <code>cats.labs.sugar/-&gt;=</code> for more in-depth discussion.</p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L171">view source</a></div></div><div class="public anchor" id="var-as-ap-.3E"><h3><a href="#var-as-ap-.3E">as-ap-&gt;</a></h3><h4 class="type">macro</h4><div class="usage"><code>(as-ap-&gt; expr name &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Thread like <code>as-&gt;</code>, within an applicative idiom. See <code>cats.labs.sugar/ap-&gt;</code> for more in-depth discussion.</p></div></div><div class="src-link"><a href="http://github.com/funcool/cats/blob/master/src/cats/labs/sugar.cljc#L104">view source</a></div></div></section></section></body></html>